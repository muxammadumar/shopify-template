<section id="faq" class="ios-section" aria-label="FAQ">
  <div class="ios-wrap">
    {% render 'ios-section-header', title: section.settings.title, subtitle: section.settings.subtitle %}
    <p class="ios-sub ios-faq-support">If you have questions go to <a href="/pages/contact">Support</a>.</p>

    {% if section.blocks.size > 0 %}
    <div class="ios-faq">
      {% for block in section.blocks %}
        {% if block.settings.q != blank %}
        <details class="ios-details" {{ block.shopify_attributes }}>
          <summary class="ios-summary">
            {{ block.settings.q }}
            <span class="ios-chev" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
          </summary>
          {% if block.settings.a != blank %}
          <p>{{ block.settings.a }}</p>
          {% endif %}
        </details>
        {% endif %}
      {% endfor %}
    </div>
    {% else %}
    <p class="ios-sub">No FAQ entries available.</p>
    {% endif %}
    
    {%- comment -%} FAQPage Schema for SEO {%- endcomment -%}
    {%- if section.blocks.size > 0 -%}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {%- for block in section.blocks -%}
          {%- if block.type == 'qa' -%}
          {
            "@type": "Question",
            "name": "{{ block.settings.q | escape }}",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "{{ block.settings.a | escape }}"
            }
          }{%- unless forloop.last -%},{%- endunless -%}
          {%- endif -%}
        {%- endfor -%}
      ]
    }
    </script>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "iOS FAQ",
  "settings": [
    { "type": "text", "id": "title", "label": "Title", "default": "FAQ" },
    { "type": "textarea", "id": "subtitle", "label": "Subtitle", "default": "Short answers to frequently asked questions." }
  ],
  "blocks": [
    {
      "type": "qa",
      "name": "Q&A",
      "settings": [
        { "type": "text", "id": "q", "label": "Question", "default": "Question" },
        { "type": "textarea", "id": "a", "label": "Answer", "default": "Answer" }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [{ "name": "iOS FAQ" }]
}
{% endschema %}

